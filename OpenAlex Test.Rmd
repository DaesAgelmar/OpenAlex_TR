---
title: "R Notebook"
output:
  html_notebook: 
    toc: yes
    number_sections: yes
  html_document:
    toc: yes
    df_print: paged
---

# Giriş

OpenAlex, Microsoft Academic Graph yerine hizmete giren açık kaynak destekli bir Akademik Ağ verisi erişi platformu olarak Şubat 2022 de erişime açıldı. Bununla birlikte bu kaynaktan veri çekmek için farklı platformlar için çözümler oluşturuldu. Bunlardan birisi de aktif bir kullanıcı kitlesi olan R programlama dili. OpenAlex için geliştirilen ve GitHub üzerinde erişime sunulan iki paket bulabildim. Bu paketler sistemin API üzerinden sunduğu verileri daha işlenebilir formatlara dönüştürmeye imkan veriyor. Test içi Rstudio arayüzünü kullanıyoruz. Resmi bir CRAN paketi olmadığı için kurulumu devtools paketi üzerinden yapıyoruz.

install.packages("devtools")

devtools::install_github("ekmaloney/openalexR")

devtools::install_github("kth-library/openalex", dependencies = TRUE)

Ben kurulumu sağladığım için sadece kütüphaneleri sisteme ekledim.

# Ön Hazırlık ve Paketlerin Yüklenmesi

İhtiyaç duyduğumuz paketleri yüklemeden önce çalışma ortamımızda bulunan değişkenlerin temizlenmesi gerekiyor. Kod satırımızda bulunan ilk komut geçmişten kalan değişkenleri çalışma ortamımızdan temizliyor. Çekilecek veri setlerini daha anlaşılır bir hale getirmek için ihtiyaç duyduğumuz kütüphanemiz ise "tidyverse". Bu paketin yanında OpenAlex'den veri çekmek için geliştirilen iki paket olan openalex ve openalexR paketlerini yüklüyoruz.

```{r Required Libraries, warning=FALSE}
rm(list = ls(all.names = TRUE))
library(tidyverse)
library(openalexR)
library(openalex)
library(gt)
library(gtsummary)
library(DT)
```

# openalexR Paketi

ilk testimizi "openalexR" paketinin sağladığı komutlarla yapacağız.

# find_work() - Belli Bir Yayını Bulmak

İlk denememiz araştırmacıların çalışmalarını derlememizi sağlayan find_work komutu.

find_work işlevi üç ana parametre alır: (1) Kimlik türü, bunlardan biri: doi, open_alex, mag (Microsoft Academic Graph), pmid (Pubmed Identifier), pmcid (Pubmed Central Identifier) (2) Id(tanımlayıcılar), şunlardan biri olabilir: 1 kimlik veya bir kimlik listesi olabilir. (3) Değişken_unnest (isteğe bağlı) - veri çerçevesini daha uzun hale getirmek istediğiniz bir değişken (yazarlıklar, kavramlar, başvurulan_çalışmalar, ilgili_çalışmalar ve alıntı_sayısı_yılı olabilir).

Bu komutla araştırmacıların openalex içindeki tanımlayıcı bilgilerine erişim sağlıyoruz. Bu komutun sağladığı verileri kullanarak araştırmacının diğer verilerine erişmek mümkün olacaktır.

```{r find_work()}
paper_info <- find_work (id_type = "doi", 
                         id = "https://dx.doi.org/10.5152/FNJN.2019.18028",
                         variable_unnest = "authors")
paper_tbl <- paper_info %>% select(title,openalexid,publication_date)
datatable(paper_tbl)
```

# find_author() - Araştırmacıyı Bulma

Bir kalıcı tanımlayıcı ile nasıl çalışmayı bulabiliyor isek aynı şekilde eğer openalex, orcid veya scopus profilini bildiğiniz bir araştırmacıyı bulabiliriz.

```{r find_author()}
find_author_by_id <-find_author(id_type = "openalex",id="https://openalex.org/A2614412206")
clean_author_info(find_author_by_id)
tbl_info <- find_author_by_id %>%select(name,orcid,openalex_id,total_works)
datatable(tbl_info)
```

# get_authors_papers() - Araştırmacının Tüm Yayınlarına Erişme

Bir önceki komutla tespit ettiğimiz araştırmacı profiline dair bilgileri get_authors_papers() fonksiyonu ile geliştiriyoruz. Bu fonksiyonda yine bir önceki komut gibi çalışıyor. Hemen bir deneme yapalım.

```{r get_authors_papers() Fonksiyonu, warning=FALSE}
Researcher_oa_id <- paper_info$authors_id[1]
all_papers <- get_authors_papers(id_type = "openalex",
                                 id = Researcher_oa_id)
tbl_all_papers <- all_papers %>% select(title,openalex,publication_year)
datatable(tbl_all_papers)

```

# Eş Yazarları Bulmak

Bütün çalışmaları derledikten sonra eğer varsa çok yazarlı çalışmalar için araştırmaların hangi araştırma odakları üzerinde yoğunlaştıklarını belirlemek ve eş yazarların openalex kimliklerini belirleyebiliriz.

```{r Finding Co_Authors, message=TRUE, warning=FALSE, class.output="scroll-100"}

co_author_list <- all_papers %>% 
    unnest(authorships, names_sep = "_") %>%
    unnest(authorships_author, names_sep = "_") %>%
    select(title,publication_year,authorships_author_id,authorships_author_display_name) %>%
    distinct(authorships_author_display_name,.keep_all = TRUE)
datatable(co_author_list)
```